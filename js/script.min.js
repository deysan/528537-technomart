var tobuy=document.querySelectorAll(".goods__btn--buy"),cart=document.querySelector(".modal-cart"),form=document.querySelector(".contacts__form"),feedback=document.querySelector(".modal-feedback"),map=document.querySelector(".contacts__map"),maps=document.querySelector(".modal-map"),overlay=document.querySelector(".modal-overlay"),close=document.querySelectorAll(".modal-close"),formfeed=feedback.querySelector(".modal-feedback__form"),fullname=feedback.querySelector("[name=fullname]"),email=feedback.querySelector("[name=email]"),text=feedback.querySelector("[name=text]"),isStorageSupport=!0,storage_fullname="",storage_email="";try{storage_fullname=localStorage.getItem("fullname"),storage_email=localStorage.getItem("email")}catch(e){isStorageSupport=!1}if(cart){for(var i=0;i<tobuy.length;i++)tobuy[i].addEventListener("click",function(e){e.preventDefault(),cart.classList.add("modal-show"),overlay.classList.add("modal-show")});for(i=0;i<close.length;i++)close[i].addEventListener("click",function(e){e.preventDefault(),cart.classList.remove("modal-show"),overlay.classList.remove("modal-show")});overlay.addEventListener("click",function(e){e.preventDefault(),cart.classList.remove("modal-show"),overlay.classList.remove("modal-show")})}if(feedback){form.addEventListener("click",function(e){e.preventDefault(),feedback.classList.add("modal-show"),overlay.classList.add("modal-show"),storage_fullname&&(fullname.value=storage_fullname,email.focus()),storage_email?(email.value=storage_email,text.focus()):fullname.focus()});for(i=0;i<close.length;i++)close[i].addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("modal-show","modal-error"),overlay.classList.remove("modal-show")});overlay.addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("modal-show","modal-error"),overlay.classList.remove("modal-show")}),formfeed.addEventListener("submit",function(e){fullname.value&&email.value&&text.value?isStorageSupport&&(localStorage.setItem("fullname",fullname.value),localStorage.setItem("email",email.value)):(e.preventDefault(),feedback.classList.remove("modal-error"),feedback.offsetWidth=feedback.offsetWidth,feedback.classList.add("modal-error"),console.log("Нужно заполнить все поля"))})}if(maps){map.addEventListener("click",function(e){e.preventDefault(),maps.classList.add("modal-show"),overlay.classList.add("modal-show")});for(i=0;i<close.length;i++)close[i].addEventListener("click",function(e){e.preventDefault(),maps.classList.remove("modal-show"),overlay.classList.remove("modal-show")});overlay.addEventListener("click",function(e){e.preventDefault(),maps.classList.remove("modal-show"),overlay.classList.remove("modal-show")})}window.addEventListener("keydown",function(e){27===e.keyCode&&(cart.classList.contains("modal-show")&&overlay.classList.contains("modal-show")&&(cart.classList.remove("modal-show"),overlay.classList.remove("modal-show")),feedback.classList.contains("modal-show")&&overlay.classList.contains("modal-show")&&(feedback.classList.remove("modal-show","modal-error"),overlay.classList.remove("modal-show")),maps.classList.contains("modal-show")&&overlay.classList.contains("modal-show")&&(maps.classList.remove("modal-show"),overlay.classList.remove("modal-show")))});